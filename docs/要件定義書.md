# AR LLM プロトタイプ開発 要件定義書 (最終版)

## 【重要】開発スタック確定

- **TypeScript / React Native (Expo) / Hono** を採用
- **リリース目標**: 12 月 13 日
- **予算**: 3 万円以内

---

## 1. プロジェクト概要

| 項目             | 定義内容                                                       | 備考                           |
| ---------------- | -------------------------------------------------------------- | ------------------------------ |
| プロジェクト名   | AR LLM プロトタイプ (コードネーム: キモヲタの夢)               |                                |
| フェーズ         | MVP (Minimum Viable Product) / PoC                             |                                |
|                  | ハッカソンレベルの短期開発                                     |                                |
| 目標リリース時期 | 2025 年 12 月 13 日                                            |                                |
| 開発期間         | 約 2 日間                                                      |                                |
| 想定予算         | 3 万円以内                                                     | API 利用料、フリー素材調達費等 |
| プロジェクト目的 | AR モデルと LLM を連携させ、対話・IoT 操作の可能性を検証する。 |                                |

---

## 2. 要求定義(ユーザー要求)

### 2.1. 対象業務とユーザー

| 項目         | 定義内容                                                      |
| ------------ | ------------------------------------------------------------- |
| 対象範囲     | IoT 機器の操作、汎用的な対話型カワボ LLM (プロトタイプレベル) |
| 主要ユーザー | キモヲタ                                                      |

### 2.2. 実現したいこと (要求事項)

| 要求 ID | 要求事項                        | 実現レベル                       |
| ------- | ------------------------------- | -------------------------------- |
| R-01    | AR モデル(可愛い女の子)との対話 | 必須                             |
| R-03    | IoT 機器を操作できるようにする  | 必須(単一デバイスの ON/OFF 検証) |
| R-04    | 可愛らしい声で応答する          | 必須(TTS の選定で対応)           |

---

## 3. 要件定義(システム仕様)

**採用技術スタック**: フロントエンドは AR 対応に優れた React Native (Expo) を採用。バックエンドは高速・低コストな Hono (TypeScript) を採用し、API キーを厳重に管理します。

### 3.1. システム構成要件

| 要素           | 選定技術/サービス                                        | 備考                                               |
| -------------- | -------------------------------------------------------- | -------------------------------------------------- |
| 開発言語       | TypeScript                                               | 型安全性を確保。                                   |
| フロントエンド | React Native / Expo                                      | AR、ネイティブ機能(マイク/TTS) へのアクセスを担当  |
| バックエンド   | Hono on Edge Runtime                                     | LLM 連携、IoT 操作の API Gateway として機能。      |
| LLM            | OpenAI/Claude API (TypeScript SDK)                       | 応答速度とコストを考慮。                           |
| ASR/TTS        | Expo/React Native ネイティブ機能 または Google Cloud API | 低コストと高速性を優先し、ネイティブ機能から検証。 |

### 3.2. 機能要件(MVP: Minimum Viable Product)

| 要求 ID | 機能名称               | 技術的要件/実現方法                                                                                          | 優先度 |
| ------- | ---------------------- | ------------------------------------------------------------------------------------------------------------ | ------ |
| R-01    | AR キャラクター表示    | React Native AR ライブラリを使用し、静的/ループアニメのフリー 3D モデルを配置。                              | 高     |
| R-02    | 音声入力・テキスト変換 | プッシュトゥトーク方式。ASR 結果を Hono API へ送信                                                           | 高     |
| R-03    | LLM 連携・対話         | Hono が LLM API と連携。プロンプトでキャラクター設定を注入し応答生成。                                       | 高     |
| R-04    | 応答の音声合成         | Hono からの応答テキストを、フロントエンドのネイティブ TTS で「カワボ」を意識して合成・再生。                 | 高     |
| R-05    | IoT 操作プロトコル     | Hono が特定コマンドを検知し、Webhook を介して単一の IoT デバイス (スマートライトなど) の ON/OFF 操作を実行。 | 中     |

### 3.3. データフロー

ユーザーの音声入力から応答までの処理は、フロントとバックエンドで分担されます。

1. **音声入力**: React Native がユーザー音声を録音。
2. **テキスト化**: ASR でテキストに変換。
3. **対話リクエスト**: React Native (テキスト) → Hono API (LLM 処理、プロンプト管理)。
4. **IoT 判断**: Hono API 内で IoT 操作が必要か判断。必要なら Webhook を発火。
5. **応答**: Hono API (応答テキスト) → React Native。
6. **音声再生**: React Native がネイティブ TTS で音声合成し再生。

### 3.4. 非機能要件

| 要件         | 定義                                                                        |
| ------------ | --------------------------------------------------------------------------- |
| 性能         | 音声入力完了から応答開始まで 5 秒以内を目標とする。                         |
| 保守性       | TypeScript による型安全な開発。API キーは Hono の環境変数で厳重に管理       |
| セキュリティ | 認証機能は実装せず。API キーの秘匿化を最優先                                |
| コスト       | API 利用料を抑えるため、LLM/ASR/TTS は可能な限り無料枠/ネイティブ機能を優先 |
